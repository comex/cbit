This is incomplete and poorly tested; it will evolve as I write nontrivial
programs that actually use it.
